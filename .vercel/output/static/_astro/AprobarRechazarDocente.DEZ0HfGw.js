import{j as e}from"./jsx-runtime.CLpGMVip.js";import{r as i}from"./index.CXuOLBzL.js";import{M as x}from"./modale.D-yblIho.js";/* empty css                                */const g=({postulanteId:s,documentoUrl:n,telefono:l})=>{const[d,t]=i.useState(!1),[a,p]=i.useState(""),c=o=>{p(o),t(!0)},m=async()=>{try{const o=await fetch("/api/docentes/updateEstadoDocente",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({idDocente:s,estado:a.toLowerCase()})}),h=await o.json();if(o.ok){if(alert(`El docente ha sido ${a==="rechazado"?"rechazado":"aprobado"} exitosamente.`),a==="aprobado"){const u=`Es para ESAM una satisfacción su integración al plantel docente, usted ha sido ${a==="aprobado"?"aprobado":"rechazado"}. Para completar su proceso de incorporación, remita los documentos requeridos del siguiente enlace : ${n}`,b=`https://wa.me/${l}?text=${encodeURIComponent(u)}`;window.open(b,"_blank"),await fetch("http://localhost:3001/send-email-docente",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:a,documentoUrl:n,postulanteId:s})})}}else alert(`Hubo un problema al actualizar el estado del docente: ${h.error}`)}catch(o){console.error("Error al actualizar el estado del docente:",o),alert("No se pudo procesar la solicitud. Intenta nuevamente.")}finally{t(!1)}},r=()=>{t(!1)};return e.jsxs("div",{className:"buttonsCont",children:[e.jsxs("button",{className:"approve-button custom-button",onClick:()=>c("aprobado"),children:[e.jsx("div",{className:"icon-circle",children:e.jsx("img",{src:"/images/iconos/check.png",alt:"Aprobar",className:"icon-button"})}),e.jsx("span",{className:"button-text",children:"Aprobar"})]}),e.jsxs("button",{className:"reject-button custom-button",onClick:()=>c("rechazado"),children:[e.jsx("div",{className:"icon-circle",children:e.jsx("img",{src:"/images/iconos/rechazar.png",alt:"Rechazar",className:"icon-button"})}),e.jsx("span",{className:"button-text",children:"Rechazar"})]}),e.jsxs(x,{isOpen:d,onClose:r,title:"Confirmación de acción",children:[e.jsxs("p",{children:["¿Estás seguro de ",a==="aprobado"?"aprobar":"rechazar"," este docente?"]}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{onClick:m,className:"v-btn",children:"Aceptar"}),e.jsx("button",{onClick:r,className:"v-btn cancel-btn",children:"Cancelar"})]})]})]})};export{g as AprobarRechazarDocente};
