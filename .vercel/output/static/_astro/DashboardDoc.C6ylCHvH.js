const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/PostDegreeForm.a_16GpOV.js","_astro/jsx-runtime.D_zvdyIk.js","_astro/index.Bgw4UDry.js","_astro/CountrySelect.DJ9TbNX7.js","_astro/GradosSelect.BZhHRorV.js","_astro/index.XfHVqkOt.css","_astro/CourseForm.DX9Ab5r8.js","_astro/SkillForm.DOnvgVFF.js","_astro/IdiomasManager.jpaGX8pB.js","_astro/DocentesIntel.BETcCDly.js","_astro/prueba.CDyBpCa_.css"])))=>i.map(i=>d[i]);
import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as d,R as b}from"./index.Bgw4UDry.js";/* empty css                       */const z="modulepreload",O=function(g){return"/"+g},y={},j=function(v,u,p){let o=Promise.resolve();if(u&&u.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),s=c?.nonce||c?.getAttribute("nonce");o=Promise.allSettled(u.map(n=>{if(n=O(n),n in y)return;y[n]=!0;const m=n.endsWith(".css"),N=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${N}`))return;const i=document.createElement("link");if(i.rel=m?"stylesheet":z,m||(i.as="script"),i.crossOrigin="",i.href=n,s&&i.setAttribute("nonce",s),document.head.appendChild(i),m)return new Promise((f,D)=>{i.addEventListener("load",f),i.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${n}`)))})}))}function h(c){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=c,window.dispatchEvent(s),!s.defaultPrevented)throw c}return o.then(c=>{for(const s of c||[])s.status==="rejected"&&h(s.reason);return v().catch(h)})},U=()=>{const[g,v]=d.useState(null),[u,p]=d.useState(!1),[o,h]=d.useState(null),[c,s]=d.useState(!1),[n,m]=d.useState(null),[N,i]=d.useState(null),[f,D]=d.useState(null),_=a=>{const[t,r,l]=a.split("/");return`${l}-${r}-${t}`},S=a=>{if(a.target.files&&a.target.files[0]){const t=a.target.files[0];i(t),D(URL.createObjectURL(t))}},C=async a=>{p(!0);try{const t=new FormData;t.append("idDocente",a.idDocente.toString()),t.append("apellidoMaterno",a.apellidoMaterno||""),t.append("apellidoPaterno",a.apellidoPaterno||""),t.append("nombres",a.nombres||""),t.append("numeroReferencia",a.numeroReferencia||""),t.append("correo",a.correo||""),t.append("telefono",a.telefono||""),t.append("numeroDocumento",a.numeroDocumento||""),t.append("fechaNacimiento",a.fechaNacimiento||""),t.append("ciudadRadicacion",a.ciudadRadicacion||""),t.append("genero",a.genero||""),t.append("direccion",a.direccion||""),t.append("estado",a.estado||""),N?t.append("fotografia",N):o?.fotografia&&t.append("fotografia",o.fotografia);const r=await fetch("/api/update_postulante",{method:"POST",body:t});if(r.ok){const l=await r.json();console.log("Datos actualizados:",l),alert("Datos actualizados con éxito")}else{const l=await r.json();console.error("Error del servidor:",l),alert("Hubo un error al actualizar los datos")}}catch(t){console.error("Error en el cliente:",t),alert("Hubo un error al actualizar los datos")}finally{p(!1)}};d.useEffect(()=>{(async()=>{const t=localStorage.getItem("idDocente");if(!t){alert("No se encontró el ID del docente en localStorage");return}v(t),p(!0);try{const r=await fetch(`http://localhost:4321/api/docentes/${t}`);if(!r.ok)throw new Error("Error al obtener datos del docente");const l=await r.json();h(l)}catch(r){console.error("Error al cargar datos:",r)}finally{p(!1)}})()},[]);const E=a=>{const{name:t,value:r}=a.target;h(l=>l?{...l,[t]:r}:null)},P=a=>{a.preventDefault(),o&&(C(o),s(!1))},R=b.lazy(()=>j(()=>import("./PostDegreeForm.a_16GpOV.js"),__vite__mapDeps([0,1,2,3,4,5]))),k=b.lazy(()=>j(()=>import("./CourseForm.DX9Ab5r8.js"),__vite__mapDeps([6,1,2,5]))),L=b.lazy(()=>j(()=>import("./SkillForm.DOnvgVFF.js"),__vite__mapDeps([7,1,2,5]))),M=b.lazy(()=>j(()=>import("./IdiomasManager.jpaGX8pB.js"),__vite__mapDeps([8,1,2,5]))),A=b.lazy(()=>j(()=>import("./DocentesIntel.BETcCDly.js"),__vite__mapDeps([9,1,2,3,10]))),x=a=>{m(a)},V=()=>{m(null)};return e.jsxs("div",{children:[e.jsx("div",{className:"Prueba",children:e.jsxs("div",{className:"contenedor2",children:[e.jsx("h1",{className:"perfil",children:" Perfil"}),e.jsxs("div",{className:"contenedor2-1",children:[e.jsx("h1",{className:"form-title"}),e.jsxs("div",{className:"contenedor1",children:[o?.fotografia&&!f&&e.jsx("img",{src:o.fotografia,alt:"Fotografía del docente",style:{width:"150px",height:"150px"}}),f&&e.jsx("img",{src:f,alt:"Preview de la foto",style:{width:"150px",height:"150px"}})]})]}),e.jsxs("div",{className:"contenedor2-2",children:[e.jsxs("div",{className:"profile-info-edit-container",children:[o&&e.jsx("div",{className:"profile-info",children:e.jsxs("div",{children:[e.jsxs("p",{className:"profile-info-name",children:[o.nombres," ",o.apellidoPaterno," ",o.apellidoMaterno]}),e.jsx("p",{className:"profile-info-email",children:o.correo}),e.jsx("p",{className:"profile-info-phone",children:o.telefono}),e.jsx("p",{className:"profile-info-city",children:o.ciudadRadicacion})]})}),e.jsx("button",{className:"edit-button1",onClick:()=>s(!0)})]}),e.jsx("div",{className:"profile-container",children:e.jsxs("div",{children:[e.jsx("h1",{children:"Agregar Información"}),e.jsxs("div",{className:"buttons-container-perfil",children:[e.jsx("button",{className:"animated-button-estudios",onClick:()=>x("estudios"),children:"Ver Estudios Superiores"}),e.jsx("button",{className:"animated-button-experiencia",onClick:()=>x("experiencia"),children:"Ver Experiencia Docente"}),e.jsx("button",{className:"animated-button-habilidades",onClick:()=>x("habilidades"),children:"Ver Habilidades Blandas"}),e.jsx("button",{className:"animated-button-idiomas",onClick:()=>x("idiomas"),children:"Ver Idiomas"}),e.jsx("button",{className:"animated-button-producciones",onClick:()=>x("producciones"),children:"Ver Producciones Intelectuales"})]}),n&&e.jsx("div",{className:"modaldash",children:e.jsxs("div",{className:"modaldash-content",children:[e.jsx("button",{onClick:V,className:"modaldash-close-button",children:"Cerrar"}),e.jsxs(d.Suspense,{fallback:e.jsx("p",{children:"Cargando..."}),children:[n==="estudios"&&e.jsx(R,{}),n==="experiencia"&&e.jsx(k,{}),n==="habilidades"&&e.jsx(L,{}),n==="idiomas"&&e.jsx(M,{}),n==="producciones"&&e.jsx(A,{})]})]})})]})})]})]})}),c&&e.jsx("div",{className:"modaldash",children:e.jsxs("div",{className:"modaldash-content",children:[e.jsx("h2",{children:"Editar Información"}),e.jsxs("form",{className:"profile-form",onSubmit:P,children:[[{label:"Nombres",name:"nombres"},{label:"Apellido Paterno",name:"apellidoPaterno"},{label:"Apellido Materno",name:"apellidoMaterno"},{label:"Número de Referencia",name:"numeroReferencia"},{label:"Correo",name:"correo",type:"email"},{label:"Teléfono",name:"telefono"},{label:"Número de Documento",name:"numeroDocumento"},{label:"Ciudad de Radicación",name:"ciudadRadicacion"},{label:"Género",name:"genero"},{label:"Dirección",name:"direccion"},{label:"Estado",name:"estado"}].map(a=>e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[a.label,":"]}),e.jsx("input",{className:"form-input",type:a.type||"text",name:a.name,value:o[a.name]||"",onChange:E})]},a.name)),e.jsxs("div",{className:"fotografi-cont",children:[e.jsx("label",{className:"form-label",children:"Fotografía:"}),e.jsx("input",{className:"form-input",type:"file",accept:"image/*",onChange:S})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha de Nacimiento:"}),e.jsx("input",{className:"form-input",type:"date",name:"fechaNacimiento",value:o?.fechaNacimiento?_(o.fechaNacimiento):"",onChange:E})]}),e.jsxs("div",{className:"button-guardar",children:[e.jsx("button",{type:"submit",className:"submit-button",disabled:u,children:u?"Guardando...":"Guardar"}),e.jsx("button",{type:"button",className:"cancel-button1",onClick:()=>s(!1),children:"Cancelar"})]})]})]})})]})};export{U as DashboardDoc};
