import{j as e}from"./jsx-runtime.CLpGMVip.js";import{r as l}from"./index.CXuOLBzL.js";/* empty css                       */const f=({onSearch:a})=>{const[c,d]=l.useState(""),n=()=>{a(c)};return e.jsx("div",{className:"v-row",children:e.jsxs("div",{className:"v-col",children:[e.jsx("div",{className:"v-input v-input--horizontal",children:e.jsx("div",{className:"v-input__control",children:e.jsxs("div",{className:"v-field",children:[e.jsx("label",{htmlFor:"search-input",children:"Ingrese datos a buscar"}),e.jsx("input",{type:"text",id:"search-input",value:c,onChange:v=>d(v.target.value),className:"v-field__input"})]})})}),e.jsx("button",{type:"button",onClick:n,className:"v-btn",children:"Buscar"})]})})},g=({onGradeChange:a})=>{const[c,d]=l.useState(""),[n,v]=l.useState([]),[m,p]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const i=await fetch("http://localhost:4321/api/docentes/grados");if(!i.ok)throw new Error("Error al obtener los grados");const j=await i.json();v(j),p(!1)}catch(i){console.error("Error al obtener los grados:",i),p(!1)}})()},[]);const x=h=>{const i=h.target.value;d(i),a(i)};return m?e.jsx("p",{children:"Cargando grados..."}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"grado-select",children:"Nivel Académico"}),e.jsxs("select",{id:"grado-select",value:c,onChange:x,children:[e.jsx("option",{value:"postulante",children:"Seleccionar Grado"}),n.map(h=>e.jsx("option",{value:h.tipo,children:h.tipo},h.idGrado))]})]})},b=({idDocente:a,nombres:c,correo:d,numeroDocumento:n,telefono:v})=>e.jsxs("div",{className:"v-card v-theme--light v-card--density-default v-card--variant-elevated mb-4",children:[e.jsx("div",{className:"v-card__loader",children:e.jsxs("div",{className:"v-progress-linear v-theme--light v-locale--is-ltr",role:"progressbar","aria-hidden":"true","aria-valuemin":0,"aria-valuemax":100,style:{top:"0px",height:"0px",left:"50%",transform:"translateX(-50%)"},children:[e.jsx("div",{className:"v-progress-linear__background",style:{width:"100%"}}),e.jsxs("div",{className:"v-progress-linear__indeterminate",children:[e.jsx("div",{className:"v-progress-linear__indeterminate long"}),e.jsx("div",{className:"v-progress-linear__indeterminate short"})]})]})}),e.jsxs("div",{className:"result-item",children:[e.jsxs("div",{className:"v-card-content",children:[e.jsx("div",{className:"v-card-title sub-title",children:c}),e.jsxs("div",{className:"v-card-subtitle",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Correo:"})," ",d]}),e.jsx("br",{}),e.jsxs("p",{children:[e.jsx("strong",{children:"CI:"})," ",n]}),e.jsx("br",{}),e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",v]})]})]}),e.jsx("div",{className:"v-card-actions",children:e.jsxs("button",{type:"button",className:"v-btn v-btn--slim v-theme--light v-btn--density-default v-btn--size-default v-btn--variant-text button-card",children:[e.jsx("span",{className:"v-btn__overlay"}),e.jsx("span",{className:"v-btn__underlay"}),e.jsx("a",{href:`/postulantes/info/${a}`,children:"ABRIR"})]})})]})]}),S=()=>{const[a,c]=l.useState([]),[d,n]=l.useState([]),[v,m]=l.useState(!0),[p,x]=l.useState("");l.useEffect(()=>{(async(o="")=>{try{const t=await fetch(`http://localhost:4321/api/docentes/postulantes?search=${o}`);if(!t.ok)throw new Error("Error al obtener los datos");const r=await t.json();c(r),n(r.filter(u=>u.estado==="postulante")),m(!1)}catch(t){console.error("Error al conectar con la API:",t),m(!1)}})()},[]);const h=s=>{let o=a;if(s.trim()!==""){const t=s.toLowerCase();o=o.filter(r=>r.nombres&&r.nombres.toLowerCase().includes(t)||r.correo&&r.correo.toLowerCase().includes(t)||r.numeroDocumento&&r.numeroDocumento.toString().includes(s)||r.estudiossuperiores&&r.estudiossuperiores.some(u=>u.tipo==="postgrado"&&u.nombre&&u.nombre.toLowerCase().includes(t))||r.cursos&&r.cursos.some(u=>u.nombre&&u.nombre.toLowerCase().includes(t)))}else o=a.filter(t=>t.estado==="postulante");n(o)},i=s=>{const o=s?a.filter(t=>t.estudiossuperiores.some(r=>r.gradoTipo===s)):a;n(o)},j=s=>{x(s);let o=a;s==="agendado"?o=a.filter(t=>t.agendado===1&&t.estado==="postulante"):s==="aprobado"||s==="rechazado"?o=a.filter(t=>t.estado.toLowerCase()===s.toLowerCase()):o=a.filter(t=>t.estado==="postulante"),n(o)};return v?e.jsx("p",{children:"Cargando datos..."}):e.jsxs("div",{className:"docente-search-container",children:[e.jsxs("div",{className:"filters-container",children:[e.jsx(f,{onSearch:h}),e.jsx(g,{onGradeChange:i}),e.jsx("label",{htmlFor:"estado-select",children:"Buscar por estado"}),e.jsxs("select",{className:"filter-select",value:p,onChange:s=>j(s.target.value),children:[e.jsx("option",{value:"postulante",children:"Todos"}),e.jsx("option",{value:"agendado",children:"Agendados"}),e.jsx("option",{value:"aprobado",children:"Aprobados"}),e.jsx("option",{value:"rechazado",children:"Rechazados"})]})]}),e.jsx("div",{className:"results-container",children:d.length>0?d.map(s=>e.jsx(b,{nombres:s.nombres,correo:s.correo,numeroDocumento:s.numeroDocumento,telefono:s.telefono,idDocente:s.idDocente},s.idDocente)):e.jsx("p",{className:"no-results",children:"No se encontraron resultados."})})]})};export{S as DocenteSearch};
