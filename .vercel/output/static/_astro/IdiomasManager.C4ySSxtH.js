import{j as e}from"./jsx-runtime.CLpGMVip.js";import{r}from"./index.CXuOLBzL.js";/* empty css                       */function A({selectedIdioma:j,onIdiomaChange:h,valueAndId:s,selected:l,selectedId:i}){const[u,m]=r.useState([]);return r.useEffect(()=>{(async()=>{try{const c=await fetch("/api/idiomas/idiomas");if(c.ok){const n=await c.json();m(n)}else console.error("Error al obtener los grados")}catch(c){console.error("Error al consumir la API:",c)}})()},[]),e.jsxs("label",{children:["Idiomas:",e.jsxs("select",{name:s,id:s,value:j?.id||"",onChange:d=>{const c=parseInt(d.target.value,10),n=u.find(I=>I.idIdioma===c);n&&h({id:n.idIdioma,name:n.idioma})},children:[e.jsx("option",{value:i,selected:!0,children:l}),u.map(d=>e.jsx("option",{value:d.idIdioma,children:d.idioma},d.idIdioma))]})]})}const T=()=>{const[j,h]=r.useState(null),[s,l]=r.useState({idIdioma:"",idioma:"",escritura:1,oral:1,lectura:1,escucha:1}),[i,u]=r.useState(null),[m,d]=r.useState(null),[c,n]=r.useState(!1),[I,x]=r.useState(!1),[b,g]=r.useState(!1);r.useEffect(()=>{(async()=>{const o=localStorage.getItem("idDocente");if(!o){alert("No se encontró el ID del docente en localStorage");return}d(o),n(!0);try{const t=await fetch(`http://localhost:4321/api/docentes/${o}`);if(!t.ok)throw new Error("Error al obtener datos del docente");const D=await t.json();h(D)}catch(t){console.error("Error al cargar datos:",t)}finally{n(!1)}})()},[]);const w=a=>{const{name:o,value:t}=a.target;l({...s,[o]:parseInt(t)})},f=a=>{if(i){const{name:o,value:t}=a.target;u({...i,[o]:parseInt(t)})}},N=()=>{l({idioma:"",idIdioma:"",escritura:1,oral:1,lectura:1,escucha:1}),x(!0)},v=()=>{x(!1)},y=a=>{u(a),g(!0)},E=()=>{g(!1)},C=async()=>{if(!m){alert("No se encontró el ID del docente");return}try{const a=await fetch("/api/idiomasdoc/idiomasdocpost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idDocente:m,idiomas:[s]})});if(!a.ok)throw new Error("Error al crear el idioma");alert("Idioma creado con éxito"),l({idioma:"",idIdioma:"",escritura:1,oral:1,lectura:1,escucha:1});const o=await a.json();h(o),v()}catch(a){console.error("Error al agregar idioma:",a)}},S=async()=>{if(!m||!i){alert("No se encontró el ID del docente o el idioma seleccionado");return}try{const a=await fetch("/api/idiomasdoc/idiomasdocput",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({idDocente:m,idiomas:[i]})});if(!a.ok)throw new Error("Error al actualizar el idioma");alert("Idioma actualizado con éxito");const o=await a.json();h(o),E()}catch(a){console.error("Error al actualizar idioma:",a)}},p=a=>{switch(Number(a)){case 3:return"Alto";case 2:return"Medio";case 1:return"Bajo";default:return"No especificado"}};return c?e.jsx("p",{children:"Cargando datos..."}):e.jsxs("div",{className:"idiomas-manager",children:[e.jsx("h1",{children:"Gestión de Idiomas"}),e.jsx("button",{onClick:N,className:"button add-button",children:"Agregar Idioma"}),e.jsx("div",{className:"idiomas-list",children:j?.idiomas.map(a=>e.jsxs("div",{className:"idioma-card",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Idioma:"})," ",a.idioma]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Escritura:"})," ",p(a.escritura)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Oral:"})," ",p(a.oral)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Lectura:"})," ",p(a.lectura)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Escucha:"})," ",p(a.escucha)]}),e.jsx("button",{onClick:()=>y(a),className:"button edit-button",children:"Editar"})]},a.idIdiomaDocente))}),I&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",children:[e.jsx("h2",{children:"Agregar Nuevo Idioma"}),e.jsx(A,{selectedIdioma:{id:parseInt(s.idIdioma),name:s.idioma},onIdiomaChange:a=>l({...s,idIdioma:a.id.toString(),idioma:a.name}),valueAndId:"idIdioma",selected:s.idioma,selectedId:parseInt(s.idIdioma)}),["escritura","oral","lectura","escucha"].map(a=>e.jsxs("div",{className:"checkbox-group",children:[e.jsx("label",{children:a.charAt(0).toUpperCase()+a.slice(1)}),["Alto","Medio","Bajo"].map((o,t)=>e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:a,value:3-t,checked:s[a]===3-t,onChange:w}),e.jsx("label",{children:o})]},t))]},a)),e.jsx("button",{onClick:C,children:"Agregar"}),e.jsx("button",{onClick:v,children:"Cerrar"})]})}),b&&i&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",children:[e.jsx("h2",{children:"Editar Idioma"}),e.jsx("input",{type:"text",name:"idIdioma",placeholder:"ID Idioma",value:i.idIdioma,onChange:f,disabled:!0}),["escritura","oral","lectura","escucha"].map(a=>e.jsxs("div",{className:"checkbox-group",children:[e.jsx("label",{children:a.charAt(0).toUpperCase()+a.slice(1)}),["Alto","Medio","Bajo"].map((o,t)=>e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:a,value:3-t,checked:i[a]===3-t,onChange:f}),e.jsx("label",{children:o})]},t))]},a)),e.jsx("button",{onClick:S,children:"Actualizar"}),e.jsx("button",{onClick:E,children:"Cerrar"})]})})]})};export{T as default};
