import{j as e}from"./jsx-runtime.CLpGMVip.js";import{r as c}from"./index.CXuOLBzL.js";import{C as y,A as S}from"./AreaForm.Di_EG_6f.js";/* empty css                               */const F=()=>{const[a,d]=c.useState({usuario:"",password:"",nombres:"",apellidoPaterno:"",apellidoMaterno:"",correo:"",ciudadRadicacion:"",idPais:"",telefono:"",diaNacimiento:"",mesNacimiento:"",anioNacimiento:"",idAreaInteres:"",idSector:""}),[m,h]=c.useState(null),[j,x]=c.useState(null),[N,r]=c.useState(""),[p,v]=c.useState(!1),n=s=>{const{name:o,value:t}=s.target;d(u=>({...u,[o]:t}))},f=()=>{v(s=>!s)},w=s=>{const o=s.target.files?.[0]||null;if(h(o),o){const t=new FileReader;t.onloadend=()=>{x(t.result)},t.readAsDataURL(o)}else x(null);console.log("Imagen seleccionada:",o)},b=async s=>{if(s.preventDefault(),!/^(?=.*[0-9])(?=.{8,})/.test(a.password)){r("La contraseña debe tener al menos 8 caracteres y contener al menos un número.");return}if(!/^[0-9]+$/.test(a.telefono)){r("El número de contacto debe contener solo números.");return}const u=`${a.anioNacimiento}-${a.mesNacimiento}-${a.diaNacimiento}`,l=new FormData;Object.keys(a).forEach(i=>{l.append(i,a[i])}),l.append("fechaNacimiento",u),m?(console.log("Imagen a enviar:",m),l.append("fotografia",m)):console.warn("No se seleccionó ninguna imagen"),l.forEach((i,g)=>{console.log(`${g}:`,i)});try{const i=await fetch("/api/insert_postulante",{method:"POST",body:l}),g=await i.json();i.ok?(r("Postulación enviada correctamente. Ya puede iniciar sesion con su usuario y contraseña"),d({usuario:"",password:"",nombres:"",apellidoPaterno:"",apellidoMaterno:"",correo:"",ciudadRadicacion:"",idPais:"",telefono:"",diaNacimiento:"",mesNacimiento:"",anioNacimiento:"",idAreaInteres:"",idSector:""}),h(null)):r(g.error||"Error al enviar la postulación.")}catch(i){console.error("Error en la solicitud:",i),r("Error en la conexión al servidor.")}},C=()=>{window.location.href="/login"};return e.jsxs("div",{className:"login-container",children:[e.jsx("div",{className:"login-image"}),e.jsxs("div",{className:"register-box",children:[e.jsx("h1",{className:"login-title",children:"Formulario de Registro"}),e.jsxs("form",{onSubmit:b,className:"login-form",children:[e.jsx("div",{style:{marginTop:"15px",textAlign:"center",marginBottom:"15px"},children:e.jsx("img",{src:j||"/images/perfil-docente-pordefecto.png",alt:"Previsualización",width:"100",height:"100",style:{border:"1px solid #ccc",borderRadius:"8px",objectFit:"cover"}})}),e.jsx("div",{className:"form-row",style:{marginBottom:"10px"},children:e.jsx("input",{type:"file",accept:"image/*",onChange:w})}),e.jsx("input",{type:"text",name:"usuario",placeholder:"Usuario",value:a.usuario,onChange:n,className:"login-input"}),e.jsx("div",{className:"form-group input__group",children:e.jsxs("div",{className:"password-group",children:[e.jsx("input",{type:p?"text":"password",name:"password",id:"password",placeholder:"Contraseña",value:a.password,onChange:n,className:"login-input"}),e.jsx("span",{className:"toggle-password",onClick:f,title:p?"Ocultar contraseña":"Mostrar contraseña",children:p?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:e.jsx("path",{d:"M12 4.5C7.5 4.5 3.8 7.3 2 12c1.8 4.7 5.5 7.5 10 7.5s8.2-2.8 10-7.5c-1.8-4.7-5.5-7.5-10-7.5zm0 13c-3.1 0-5.6-2.5-5.6-5.5S8.9 6.5 12 6.5s5.6 2.5 5.6 5.5-2.5 5.5-5.6 5.5zm0-2.1c1.8 0 3.3-1.4 3.3-3.4s-1.4-3.4-3.3-3.4-3.3 1.4-3.3 3.4 1.4 3.4 3.3 3.4z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:e.jsx("path",{d:"M2 12c1.8 4.7 5.5 7.5 10 7.5 2.5 0 4.9-.9 6.9-2.5l2.4 2.4 1.4-1.4-19-19-1.4 1.4 2.4 2.4C3.1 7.1 2 9.4 2 12zm10-7.5c-2.5 0-4.9.9-6.9 2.5l9.9 9.9c2-.5 3.9-1.7 5.2-3.4-1.8-4.7-5.5-7.5-10-7.5zm-6 3.6 3.3 3.3C9.1 10.1 10 10 12 10c1.4 0 2.7.1 4 .4l1.7 1.7c-.4-.1-.9-.1-1.7-.1-2.1 0-4 .5-5.7 1.3L4.5 8.1z"})})})]})}),e.jsx("input",{type:"text",name:"nombres",placeholder:"Nombres",value:a.nombres,onChange:n,className:"login-input"}),e.jsx("input",{type:"text",name:"apellidoPaterno",placeholder:"Apellido Paterno",value:a.apellidoPaterno,onChange:n,className:"login-input"}),e.jsx("input",{type:"text",name:"apellidoMaterno",placeholder:"Apellido Materno",value:a.apellidoMaterno,onChange:n,className:"login-input"}),e.jsx("input",{type:"email",name:"correo",placeholder:"Correo",value:a.correo,onChange:n,className:"login-input"}),e.jsx("input",{type:"text",name:"ciudadRadicacion",placeholder:"Ciudad de Radicación",value:a.ciudadRadicacion,onChange:n,className:"login-input"}),e.jsx("div",{className:"form-group input__group",children:e.jsx("div",{className:"country-select-group",children:e.jsx(y,{valueAndId:"idPais",onChange:s=>d(o=>({...o,idPais:s.target.value}))})})}),e.jsx("input",{type:"text",name:"telefono",placeholder:"Numero de contacto",className:"login-input",id:"telefono",value:a.telefono,onChange:n}),e.jsx("label",{htmlFor:"",className:"label-text",children:"Fecha de nacimiento"}),e.jsxs("div",{className:"form-date-row",children:[e.jsxs("div",{className:"form-date",children:[e.jsxs("select",{className:"date-select",id:"diaNacimiento",name:"diaNacimiento",value:a.diaNacimiento,onChange:n,required:!0,children:[e.jsx("option",{value:"",children:"Día"}),Array.from({length:31},(s,o)=>e.jsx("option",{value:o+1,children:o+1},o+1))]}),e.jsx("span",{className:"error-text"}),e.jsx("i",{className:"error-icon"})]}),e.jsx("div",{className:"form-date",children:e.jsxs("select",{className:"date-select",id:"mesNacimiento",name:"mesNacimiento",value:a.mesNacimiento,onChange:n,required:!0,children:[e.jsx("option",{value:"",children:"Mes"}),["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"].map((s,o)=>e.jsx("option",{value:o+1,children:s},o+1))]})}),e.jsx("div",{className:"form-date",children:e.jsxs("select",{className:"date-select",id:"anioNacimiento",name:"anioNacimiento",value:a.anioNacimiento,onChange:n,required:!0,children:[e.jsx("option",{value:"",children:"Año"}),Array.from({length:100},(s,o)=>e.jsx("option",{value:2023-o,children:2023-o},2023-o))]})})]}),e.jsx("label",{htmlFor:"",className:"label-text",children:"Area de interés de docencia"}),e.jsx("div",{className:"area-interest-container",children:e.jsx(S,{onChange:n,selectedArea:a.idAreaInteres,selectedSector:a.idSector})}),e.jsx("input",{type:"submit",className:"register-button",value:"Registrarse",name:"Registrarse",placeholder:"Registrarse"}),N&&e.jsx("p",{className:"register-error",children:N}),e.jsxs("p",{className:"register-message",children:["¿Ya tienes una cuenta?"," ",e.jsx("span",{className:"register-link",onClick:C,children:"Iniciar Sesion"})]})]})]})]})};export{F as RegistroDocente};
