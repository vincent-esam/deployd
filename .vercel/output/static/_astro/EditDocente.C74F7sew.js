import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.Bgw4UDry.js";import{C as v}from"./CountrySelect.DJ9TbNX7.js";import{G as C,M as y}from"./GradosSelect.BZhHRorV.js";/* empty css                             */const E=({onImageSelect:d,containerClass:c,labelClass:n,avatarClass:o,buttonClass:h,iconClass:N})=>{const[x,g]=i.useState(null),j=a=>{const r=a.target.files?.[0];if(r){const m=new FileReader;m.onloadend=()=>{g(m.result)},m.readAsDataURL(r),d(r)}else g(null),d(null)};return e.jsxs("div",{className:c,children:[" ",e.jsx("div",{className:"v-col d-flex justify-center align-center",children:e.jsxs("div",{style:{color:"rgb(255, 255, 255)",caretColor:"rgb(255, 255, 255)",width:"150px",height:"150px"},children:[e.jsx("img",{className:o,"data-name":"imagen",src:x||"/images/perfil-docente-pordefecto.png",width:"150",height:"150",alt:"Avatar"}),e.jsx("span",{className:"v-avatar__underlay"})]})}),e.jsxs("div",{style:{marginTop:"20px",textAlign:"center"},children:[e.jsxs("label",{htmlFor:"image-upload",className:n,children:[" ","SELECCIONA UNA IMAGEN FORMAL"]}),e.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:j,className:h,style:{display:"block",margin:"10px auto"}})]})]})},P=({idDocente:d})=>{const[c,n]=i.useState(!1),[o,h]=i.useState(null),[N,x]=i.useState(!1),[g,j]=i.useState(""),[a,r]=i.useState(null),m=()=>x(!0);i.useEffect(()=>{(async()=>{n(!0);try{const s=await fetch(`http://localhost:4321/api/docentes/${d}`);if(!s.ok)throw new Error("No se pudo obtener los datos del docente");const t=await s.json();h(t),t.estudiossuperiores&&t.estudiossuperiores.length>0&&r(t.estudiossuperiores[0])}catch(s){console.error(s)}finally{n(!1)}})()},[d]);const b=async l=>{if(l.preventDefault(),!(!o||!a)){n(!0);try{const s=await fetch("/api/update_postulante",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idDocente:o.idDocente,apellidoMaterno:o.apellidoMaterno,apellidoPaterno:o.apellidoPaterno,nombres:o.nombres,numeroReferencia:o.numeroReferencia,correo:o.correo,estudiossuperiores:[{idEstudio:a.idEstudio,universidad:a.universidad,carrera:a.carrera,fecha:a.fecha,nombre:a.nombre,idPais:a.idPais,idGrado:a.idGrado,idModalidad:a.idModalidad,idTipoEstudios:a.idTipoEstudios}]})});if(s.ok){const t=await s.json();console.log("Datos actualizados:",t),alert("Datos actualizados con éxito")}else{const t=await s.json();console.error("Error del servidor:",t),alert("Hubo un error al actualizar los datos")}}catch(s){console.error("Error en el cliente:",s),alert("Hubo un error al actualizar los datos")}finally{n(!1)}}},u=l=>{const{name:s,value:t}=l.target;h(p=>p?{...p,[s]:t}:null)},f=l=>{const{name:s,value:t}=l.target;r(p=>p?{...p,[s]:t}:null)};return e.jsx("div",{className:"profile-container",children:c?e.jsx("p",{className:"loading-text",children:"Cargando..."}):e.jsxs("form",{className:"profile-form",onSubmit:b,children:[e.jsx("div",{className:"profile-photo",children:e.jsx(E,{containerClass:"profile-image-container",labelClass:"profile-image-label",avatarClass:"profile-avatar",buttonClass:"custom-upload-button",iconClass:"custom-upload-icon",onImageSelect:l=>console.log(l?`Imagen seleccionada: ${l.name}`:"No se seleccionó ninguna imagen.")})}),e.jsx("h2",{className:"form-title",children:"Actualizar Docente"}),o&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"hidden",name:"idDocente",value:o.idDocente}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Apellido Materno:"}),e.jsx("input",{className:"form-input",type:"text",name:"apellidoMaterno",value:o.apellidoMaterno,onChange:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Apellido Paterno:"}),e.jsx("input",{className:"form-input",type:"text",name:"apellidoPaterno",value:o.apellidoPaterno,onChange:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombres:"}),e.jsx("input",{className:"form-input",type:"text",name:"nombres",value:o.nombres,onChange:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Número de Referencia:"}),e.jsx("input",{className:"form-input",type:"text",name:"numeroReferencia",value:o.numeroReferencia,onChange:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Correo:"}),e.jsx("input",{className:"form-input",type:"email",name:"correo",value:o.correo,onChange:u})]})]}),e.jsx("h2",{className:"form-title",children:"Actualizar Estudio Superior"}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo de estudio:"}),e.jsx("div",{className:"form-input",children:a.tipoEstudios})]}),e.jsx("input",{type:"hidden",name:"idEstudio",value:a.idEstudio}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Universidad:"}),e.jsx("input",{className:"form-input",type:"text",name:"universidad",value:a.universidad,onChange:f})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Carrera:"}),e.jsx("input",{className:"form-input",type:"text",name:"carrera",value:a.carrera,onChange:f})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fecha:"}),e.jsx("input",{className:"form-input",type:"date",name:"fecha",value:a.fecha,onChange:f})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nombre del Estudio:"}),e.jsx("input",{className:"form-input",type:"text",name:"nombre",value:a.nombre,onChange:f})]}),e.jsx("div",{className:"form-group",children:e.jsx(v,{valueAndId:"idPais",selectedId:a.idPais,selected:a?.pais,selectedCountry:{id:a?.idPais||0,name:""},onCountryChange:l=>{r(s=>s?{...s,idPais:l.id}:null)}})}),e.jsx("div",{className:"form-group",children:e.jsx(C,{valueAndId:"idGrado",selectedId:a.idGrado,selected:a?.gradoTipo,selectedGrado:{id:a?.idGrado||0,name:""},onGradoChange:l=>{r(s=>s?{...s,idGrado:l.id}:null)}})}),e.jsx("div",{className:"form-group",children:e.jsx(y,{valueAndId:"idModalidad",selectedId:a.idModalidad,selected:a?.modalidad,selectedModalidad:{id:a?.idModalidad||0,name:""},onModalidadChange:l=>{r(s=>s?{...s,idModalidad:l.id}:null)}})})]}),e.jsx("button",{className:"submit-button",type:"submit",disabled:c,children:c?"Actualizando...":"Actualizar"}),e.jsx("button",{type:"button",className:"add-section-button",onClick:m,children:"Agregar Sección"})]})})};export{P as default};
