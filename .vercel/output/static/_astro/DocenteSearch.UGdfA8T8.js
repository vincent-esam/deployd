import{j as e}from"./jsx-runtime.CLpGMVip.js";import{r as n}from"./index.CXuOLBzL.js";import{R as g}from"./ResultadosDocentes.Np3Ba3Be.js";/* empty css                       */const v=({onSearch:a})=>{const[u,h]=n.useState(""),c=()=>{a(u)};return e.jsx("div",{className:"v-row",children:e.jsxs("div",{className:"v-col",children:[e.jsx("div",{className:"v-input v-input--horizontal",children:e.jsx("div",{className:"v-input__control",children:e.jsxs("div",{className:"v-field",children:[e.jsx("label",{htmlFor:"search-input",children:"Ingrese datos a buscar"}),e.jsx("input",{type:"text",id:"search-input",value:u,onChange:p=>h(p.target.value),className:"v-field__input"})]})})}),e.jsx("button",{type:"button",onClick:c,className:"v-btn",children:"Buscar"})]})})},b=({onGradeChange:a})=>{const[u,h]=n.useState(""),[c,p]=n.useState([]),[m,f]=n.useState(!0);n.useEffect(()=>{(async()=>{try{const l=await fetch("http://localhost:4321/api/docentes/grados");if(!l.ok)throw new Error("Error al obtener los grados");const j=await l.json();p(j),f(!1)}catch(l){console.error("Error al obtener los grados:",l),f(!1)}})()},[]);const x=i=>{const l=i.target.value;h(l),a(l)};return m?e.jsx("p",{children:"Cargando grados..."}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"grado-select",children:"Nivel AcadÃ©mico"}),e.jsxs("select",{id:"grado-select",value:u,onChange:x,children:[e.jsx("option",{value:"postulante",children:"Seleccionar Grado"}),c.map(i=>e.jsx("option",{value:i.tipo,children:i.tipo},i.idGrado))]})]})},N=()=>{const[a,u]=n.useState([]),[h,c]=n.useState([]),[p,m]=n.useState(!0),[f,x]=n.useState("");n.useEffect(()=>{(async(r="")=>{try{const s=await fetch(`http://localhost:4321/api/docentes/postulantes?search=${r}`);if(!s.ok)throw new Error("Error al obtener los datos");const t=await s.json();u(t),c(t.filter(d=>d.estado==="postulante")),m(!1)}catch(s){console.error("Error al conectar con la API:",s),m(!1)}})()},[]);const i=o=>{let r=a;if(o.trim()!==""){const s=o.toLowerCase();r=r.filter(t=>t.nombres&&t.nombres.toLowerCase().includes(s)||t.correo&&t.correo.toLowerCase().includes(s)||t.numeroDocumento&&t.numeroDocumento.toString().includes(o)||t.estudiosuperiores&&t.estudiosuperiores.some(d=>d.tipo==="postgrado"&&d.nombre&&d.nombre.toLowerCase().includes(s))||t.cursos&&t.cursos.some(d=>d.nombre&&d.nombre.toLowerCase().includes(s)))}else r=a.filter(s=>s.estado==="postulante");c(r)},l=o=>{const r=o?a.filter(s=>s.estudiosuperiores.some(t=>t.gradoTipo===o)):a;c(r)},j=o=>{x(o);let r=a;o==="agendado"?r=a.filter(s=>s.agendado===1&&s.estado==="postulante"):o==="aprobado"||o==="rechazado"?r=a.filter(s=>s.estado.toLowerCase()===o.toLowerCase()):r=a.filter(s=>s.estado==="postulante"),c(r)};return p?e.jsx("p",{children:"Cargando datos..."}):e.jsxs("div",{className:"docente-search-container",children:[e.jsxs("div",{className:"filters-container",children:[e.jsx(v,{onSearch:i}),e.jsx(b,{onGradeChange:l}),e.jsx("label",{htmlFor:"estado-select",children:"Buscar por estado"}),e.jsxs("select",{className:"filter-select",value:f,onChange:o=>j(o.target.value),children:[e.jsx("option",{value:"postulante",children:"Todos"}),e.jsx("option",{value:"agendado",children:"Agendados"}),e.jsx("option",{value:"aprobado",children:"Aprobados"}),e.jsx("option",{value:"rechazado",children:"Rechazados"})]})]}),e.jsx("div",{className:"results-container",children:h.length>0?h.map(o=>e.jsx(g,{nombres:o.nombres,correo:o.correo,numeroDocumento:o.numeroDocumento,telefono:o.telefono,idDocente:o.idDocente},o.idDocente)):e.jsx("p",{className:"no-results",children:"No se encontraron resultados."})})]})};export{N as DocenteSearch};
